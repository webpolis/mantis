% NeurIPS 2024 Style File (Simplified Version)
% Based on standard NeurIPS formatting

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{neurips_2024}[2024/01/01 NeurIPS 2024 Style]

% Options
\newif\if@preprint\@preprintfalse
\DeclareOption{preprint}{\@preprinttrue}
\DeclareOption{final}{\@preprintfalse}
\ProcessOptions\relax

% Page layout
\RequirePackage[verbose=true,letterpaper]{geometry}
\geometry{
  top=1in,
  bottom=1in,
  left=1in,
  right=1in,
  headheight=12pt,
  headsep=25pt,
  footskip=30pt
}

% Fonts
\RequirePackage{times}
\RequirePackage{helvet}
\RequirePackage{courier}

% Sectioning
\RequirePackage[compact]{titlesec}
\titleformat{\section}{\large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalsize\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalsize\itshape}{\thesubsubsection}{1em}{}

% Abstract
\renewenvironment{abstract}{%
  \centerline{\large\bfseries Abstract}
  \vspace{0.5em}
  \begin{quote}
}{%
  \end{quote}
}

% Preprint watermark
\if@preprint
  \RequirePackage{fancyhdr}
  \pagestyle{fancy}
  \fancyhf{}
  \fancyhead[L]{\small Preprint. Under review.}
  \fancyfoot[C]{\thepage}
  \renewcommand{\headrulewidth}{0pt}
\fi

% Title and author formatting
\renewcommand{\maketitle}{%
  \par
  \begingroup
    \renewcommand{\thefootnote}{\fnsymbol{footnote}}%
    \def\@makefnmark{\rlap{\@textsuperscript{\normalfont\@thefnmark}}}%
    \long\def\@makefntext##1{\parindent 1em\noindent
            \hb@xt@1.8em{%
                \hss\@textsuperscript{\normalfont\@thefnmark}}##1}%
    \@maketitle
    \thispagestyle{empty}
    \@thanks
  \endgroup
  \setcounter{footnote}{0}%
  \global\let\thanks\relax
  \global\let\maketitle\relax
  \global\let\@maketitle\relax
  \global\let\@thanks\@empty
  \global\let\@author\@empty
  \global\let\@date\@empty
  \global\let\@title\@empty
  \global\let\title\relax
  \global\let\author\relax
  \global\let\date\relax
  \global\let\and\relax
}

\def\@maketitle{%
  \newpage
  \null
  \vskip 2em%
  \begin{center}%
  \let \footnote \thanks
    {\LARGE\bfseries \@title \par}%
    \vskip 1.5em%
    {\large
      \lineskip .5em%
      \begin{tabular}[t]{c}%
        \@author
      \end{tabular}\par}%
    \vskip 1em%
  \end{center}%
  \par
  \vskip 1.5em}

\endinput
